### Рассмотрим создание базы данных на *пилотно - боевом* проекте **`Mattermost`**

1. Создать экземпляр сервера PostgreSQL, подробности см. [в документации PostgreSQL](https://www.postgresql.org/download/) .

2. Создайте базу данных и пользователя:

	Чтобы получить доступ к PostgreSQL, выполните следующее:
	```
	sudo -u postgres psql
	```
	
	Создайте базу данных:
	```sql
	CREATE DATABASE <name_database> WITH ENCODING 'UTF8' LC_COLLATE='en_US.UTF-8' LC_CTYPE='en_US.UTF-8' TEMPLATE=template0;
	```
	
	Создайте пользователя с надежным паролем:
	```sql
	CREATE USER <name_user> WITH PASSWORD 'pass';
	```
	
	Предоставить пользователю доступ к базе данных:
	```sql
	GRANT ALL PRIVILEGES ON DATABASE <name_database> to <name_user>;
	```
	
	При использовании `PostgreSQL v15.x` или более поздней версии требуются дополнительные гранты:
	```sql
	ALTER DATABASE <name_database> OWNER TO <name_user>;
	ALTER SCHEMA public OWNER TO <name_user>;
	GRANT USAGE, CREATE ON SCHEMA public TO <name_user>;
	```

3. Перезагрузите БД командой:
	```
	sudo systemctl restart postgresql
	```

**Также можно настроить удалённое подключение к PostgreSQL для этого (если база данных находится на отдельном сервере)**:

1. Редактировать `/etc/postgresql/{version}/main/postgresql.conf`:
	```
	listen_addresses = '*'
	```

2. Настройте аутентификацию клиента, отредактировав `pg_hba.conf`:
	Добавьте следующую строку, заменив `{mattermost-server-IP}`:
	```
	host all all {mattermost-server-IP}/32 md5
	```

3. Также, необходимо открыть порты в `Firewall` на устройстве хоста, и (если необходимо) настроить NAT - переадресацию.

**Теперь DB - PostgreSQL доступна для работы, по умолчанию на порту 5432 (порт можно также изменить в `/etc/postgresql/{version}/main/postgresql.conf`)**

За более подробной информацией [оф. дока Mattermost](https://docs.mattermost.com/deployment-guide/server/preparations.html)